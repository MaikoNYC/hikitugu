# hikitugu — 要件定義書

**バージョン**: 1.0
**作成日**: 2026-02-13
**ステータス**: ドラフト（レビュー待ち）

---

## 1. プロダクト概要

### 1.1 プロダクト名
**hikitugu**

### 1.2 コンセプト
Googleカレンダー・Slack・Googleスプレッドシートの情報を統合し、AIが自動で引き継ぎ資料を生成するSaaSアプリケーション。

### 1.3 解決する課題
- 引き継ぎ資料の作成に時間がかかる
- 情報が複数ツールに分散しており、手動で集約する必要がある
- 引き継ぎの質が属人化している

---

## 2. ターゲットユーザー

| ペルソナ | 説明 |
|----------|------|
| **個人ユーザー** | 自分の引き継ぎ資料を作成する社員（異動・退職・プロジェクト交代時） |
| **チームリーダー** | メンバーの引き継ぎ資料をまとめて管理・作成する管理者 |

### 2.1 利用規模
- MVP時点からSaaSとして外部提供を想定
- マルチテナント対応が必要

---

## 3. 機能要件

### 3.1 認証・ユーザー管理

| ID | 機能 | 説明 |
|----|------|------|
| AUTH-01 | Google OAuth ログイン | Googleアカウントでログイン。Googleカレンダー・スプレッドシートのアクセス権限を同時に取得 |
| AUTH-02 | Slack OAuth 連携 | Slackワークスペースと連携。チャンネル・メッセージの読み取り権限を取得 |
| AUTH-03 | ユーザープロフィール | 名前・所属・メールアドレスの表示・編集 |
| AUTH-04 | テナント管理 | 組織（テナント）単位でのユーザー管理。招待・権限設定 |

### 3.2 データ連携

| ID | 機能 | 説明 |
|----|------|------|
| DATA-01 | Googleカレンダー取得 | 指定期間の予定一覧を取得。予定に紐づく議事録（説明欄・添付）も取得 |
| DATA-02 | Slack メッセージ取得 | 指定チャンネル・期間のメッセージを取得。スレッドの内容も含む |
| DATA-03 | Googleスプレッドシート取得 | 指定スプレッドシートのデータを取得。タスク管理表・進捗表などを想定 |
| DATA-04 | データ期間指定 | 引き継ぎ対象の日付範囲をユーザーが指定できる |
| DATA-05 | データソース選択 | どの連携先のデータを含めるか選択できる |
| DATA-06 | 対象アカウント指定 | 資料の対象者を「自分自身」または「指定したアカウント」から選択できる。チームリーダーが部下のアカウントを指定して引き継ぎ資料を生成するユースケースに対応 |
| DATA-07 | クロスソース統合取得 | 全ソース（カレンダー・Slack・スプレッドシート）を横断的に取得し、時系列やトピック単位で統合する。単一ソースのみの参照は行わず、常に全ソースをベースとする |

### 3.3 引き継ぎ資料生成

| ID | 機能 | 説明 |
|----|------|------|
| GEN-01 | AI要約生成 | 取得したデータをGemini APIで自動要約・整理。全ソースを横断的に分析する |
| GEN-02 | セクション構成 | 会議履歴・コミュニケーション要約・タスク状況・引き継ぎ事項の各セクションに自動分類 |
| GEN-03 | ソース出典表示 | 各引き継ぎ事項・要約に対し、参照元ソース（Slack / Googleカレンダー / スプレッドシート）をタグ・アイコンで明示する。複数ソースに跨る情報は全ての参照元を表示 |
| GEN-04 | 出力形式の指定 | 依頼者が以下の2モードから選択する：**A) テンプレート指定モード** — ひな形ファイル（Word/PDF等）をアップロードし、その構成・フォーマットに沿って資料を生成する。**B) AI提案モード** — AIがデータ内容に基づき最適な構成・フォーマットを提案し、ユーザーの承認後に資料を生成する |
| GEN-05 | テンプレートアップロード | ひな形ファイル（Word/PDF）のアップロード・保存・再利用。テンプレートから見出し構成・セクション順序・書式を解析し、生成時に適用する |
| GEN-06 | AI構成提案 | AI提案モード時、取得データの内容・量に基づきセクション構成と各セクションの概要を提案する。ユーザーがプレビューで確認・承認してから本生成を実行する |
| GEN-07 | 資料プレビュー | 生成結果をWeb上でプレビュー表示。ソース出典タグも含めて表示 |
| GEN-08 | 手動編集 | 生成された資料をユーザーが編集・加筆できる |
| GEN-09 | PDF/Wordダウンロード | 引き継ぎ資料をPDFまたはWord形式でダウンロード。ソース出典情報も含む |
| GEN-10 | 対象者の資料生成 | 自分自身のデータだけでなく、指定した対象アカウントのカレンダー・Slack発言・スプレッドシート担当分をフィルタリングして資料を生成 |

### 3.4 資料管理

| ID | 機能 | 説明 |
|----|------|------|
| MGT-01 | 資料一覧 | 過去に生成した引き継ぎ資料の一覧表示 |
| MGT-02 | 資料共有 | 共有リンクの発行。閲覧権限の設定 |
| MGT-03 | 資料削除 | 不要な資料の削除 |
| MGT-04 | テンプレート管理 | アップロード済みのひな形一覧・プレビュー・削除。過去に使用したテンプレートを再利用可能 |

---

## 4. 非機能要件

| 項目 | 要件 |
|------|------|
| レスポンス | 資料生成は非同期処理。生成完了時に通知 |
| セキュリティ | OAuthトークンの安全な保管。テナント間のデータ分離 |
| 可用性 | Vercelでのホスティング。サーバーレス構成 |
| スケーラビリティ | マルチテナント対応。テナントごとのデータ分離 |

---

## 5. 技術スタック

| レイヤー | 技術 | 備考 |
|----------|------|------|
| フロントエンド | TypeScript (Next.js) | Vercelとの親和性 |
| バックエンド | Python (FastAPI) | Vercel Serverless Functions |
| データベース | Supabase (PostgreSQL) | 認証・ストレージも活用可能 |
| AI | Gemini API | 要約・整理に使用 |
| 認証 | Google OAuth 2.0 + Slack OAuth 2.0 | Supabase Authと併用 |
| ファイル生成 | python-docx / WeasyPrint | PDF・Word出力 |
| デプロイ | Vercel | フロント・バックエンド両方 |

---

## 6. 画面一覧（MVP）

| 画面 | 説明 |
|------|------|
| ログイン画面 | Google/Slackでのログイン |
| ダッシュボード | 資料一覧・新規作成ボタン |
| 新規作成画面 | 対象者選択・期間選択・出力形式選択（テンプレート指定 or AI提案）・生成開始 |
| AI提案確認画面 | AI提案モード時にセクション構成の提案内容を確認・承認する画面 |
| プレビュー・編集画面 | 生成結果の確認・編集・ダウンロード |
| テンプレート管理画面 | ひな形のアップロード・一覧・プレビュー・削除 |
| 設定画面 | 連携先の管理・プロフィール編集 |

---

## 7. 引き継ぎ資料の構成（想定）

生成される引き継ぎ資料は、選択したモードに応じて構成される。

### モードA: テンプレート指定モード
- ユーザーがアップロードしたひな形（Word/PDF）の見出し構成・セクション順序・書式を解析
- ひな形の各セクションに対応するデータを全ソースから収集し、テンプレートの形式に沿って埋める
- ソース出典タグは各項目に付与される

### モードB: AI提案モード
AIがデータ内容に基づき以下のようなセクション構成を提案する（ユーザー承認後に本生成）：

```
1. 概要（AI生成）
   - 対象者名・対象期間
   - 担当業務の全体像
   ※ 参照元: [Calendar][Slack][Sheet] — 全ソース横断で生成

2. 会議・予定の履歴
   - 定例会議の一覧と要約        [Calendar]
   - 重要な会議の決定事項          [Calendar]
   - 会議に関連するSlack議論       [Calendar][Slack]

3. コミュニケーション要約
   - 主要なSlackチャンネルの動向    [Slack]
   - 重要な議論・決定事項のまとめ   [Slack]
   - 関連するカレンダー予定の紐付け [Slack][Calendar]

4. タスク・進捗状況
   - スプレッドシートから取得したタスク一覧     [Sheet]
   - 完了・進行中・未着手の状況                 [Sheet]
   - タスクに関連するSlack議論・会議の紐付け    [Sheet][Slack][Calendar]

5. 引き継ぎ事項（AI生成・全ソース横断）
   - 注意が必要な事項              [Calendar][Slack][Sheet]
   - 未完了タスクの対応方針         [Sheet][Slack]
   - 関係者リスト                  [Calendar][Slack]

※ 各項目の末尾 [Calendar][Slack][Sheet] は参照元ソースを示す
※ 複数ソースに跨る情報は全ての参照元を併記する
```

---

## 8. MVP スコープ

### MVP に含める
- Google OAuth + Slack OAuth 認証
- Googleカレンダー・Slack・スプレッドシートからのデータ取得（全ソース横断）
- 対象アカウント指定（自分 or 指定アカウント）による資料生成
- 出力形式の選択: テンプレート指定モード（ひな形アップロード）/ AI提案モード
- テンプレートのアップロード・管理・再利用
- AI提案モード時のセクション構成提案・ユーザー承認フロー
- Gemini APIによるAI要約・資料生成（ソース出典タグ付き）
- 各引き継ぎ事項への参照元ソース（Slack / Calendar / Sheet）の明示表示
- Webプレビュー + PDF/Wordダウンロード（ソース出典情報含む）
- 資料の一覧・削除

### MVP に含めない（将来対応）
- チーム管理・メンバー招待機能の詳細
- リアルタイム共同編集
- Notion・Confluenceなど追加ツール連携
- 課金・サブスクリプション管理
